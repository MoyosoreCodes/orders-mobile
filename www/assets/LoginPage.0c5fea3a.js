import{a as u,Q as p,u as d,b as c,c as n}from"./use-quasar.1ca94313.js";import{_ as g,z as m,G as h,F as o,D as t,B as f,H as y,Q as i}from"./index.09c00735.js";const x={name:"LoginPage",data(){return{email:"",password:""}},setup(){return{quasar:d()}},methods:{login(){const l={email:this.email,password:this.password};u.post("auth/login",JSON.stringify(l),{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(({data:e})=>{console.log(e),e.statusCode!==200?this.quasar.notify({message:e.message,color:"negative"}):(this.quasar.notify({message:e.message,color:"secondary"}),this.quasar.localStorage.set("token",`Bearer ${e.data}`),this.$router.push({path:"/order-new"}))}).catch(e=>{if(console.log(e),e.response.data.statusCode==404||e.response.data.statusCode==400||e.response.data.message.includes("user not found")){this.quasar.notify({message:e.response.data.message,color:"negative"});return}this.quasar.notify({message:"network error, please contact support",color:"negative"})})},goToRegister(){this.$router.push({path:"/"})}}},w={class:"column items-center col-auto",style:{margin:"100px 0"}},_={class:"col 6",style:{"min-width":"400px"}},b=o("p",{class:"text-h5 text-center text-weight-bold",style:{margin:"20px 0"}},"Sign In",-1),q={style:{padding:"3px"},class:"align-self:center"};function v(l,e,S,V,a,r){return m(),h("div",w,[o("div",_,[t(p,{style:{padding:"5px"},onSubmit:y(r.login,["prevent"])},{default:f(()=>[b,t(c),t(n,{filled:"",modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=s=>a.email=s),label:"Email","lazy-rules":"",rules:[s=>s&&s.length>0||"email is required"]},null,8,["modelValue","rules"]),t(n,{filled:"",modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=s=>a.password=s),type:"Password",label:"Password","lazy-rules":"",rules:[s=>s&&s.length>0||"password is required"]},null,8,["modelValue","rules"]),o("div",q,[t(i,{label:"Sign In",type:"submit",color:"primary"}),t(i,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})]),o("div",{style:{margin:"15px",cursor:"pointer"},class:"text-p text-center text-weight-light p-by-xl",onClick:e[2]||(e[2]=(...s)=>r.goToRegister&&r.goToRegister(...s))},"Don't have an account?, Sign up")]),_:1},8,["onSubmit"])])])}var B=g(x,[["render",v]]);export{B as default};
